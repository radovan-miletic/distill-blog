---
title: "A poor man's TOC in {distill}"
description: |
  A floating Table of Contents (TOC) in {distill} in a fixed position with Scrolling Active States and Toggle (show/hide) button.
author:
  - first_name: "Radovan"
    last_name: "MiletiÄ‡"
    url: https://github.com/Radovan-Miletic
    affiliation: CLUNL
    affiliation_url: https://novaresearch.unl.pt/en/persons/radovan-miletic
    orcid_id: 0000-0002-8409-0140
citation_url: https://github.com/radovan-miletic/distill-blog
slug: miletic2022toc-distill
categories:
  - R Markdown
  - Distill
  - CSS
  - JavaScript
  - HTML
output:
  distill::distill_article:
    toc: true
    toc_depth: 6
    toc_float: true
    css: styles.css
    self_contained: false
creative_commons: CC BY
preview: images/a-poor-mans-table.jpg
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

<!-- TOC JAVASCRIPT ELEMENTS -->
<script>
function toggle () {
  document.getElementById("TOC").classList.toggle("hide");
};

window.addEventListener('DOMContentLoaded', () => {

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      const id = entry.target.getAttribute('id');
      if (entry.intersectionRatio > 0) {
        document.querySelector(`[href="#${id}"]`).parentElement.classList.add('active');
      } else {
        document.querySelector(`[href="#${id}"]`).parentElement.classList.remove('active');
      }
    });
  });

  // Track all sections that have an `id` applied
  document.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').forEach((h1, h2, h3, h4, h5, h6) => {
    observer.observe(h1, h2, h3, h4, h5, h6);
  });
  
});
</script>

<!-- TOC HTML ELEMENTS -->
<input type="button" class="d-article-with-toc" id="TOC" value="&#x2630" title="Toggle (Hide/Show) Table of Contents" onclick="toggle()" style="padding:7px; border: 0px;"/>

![Figure from https://www.wikigallery.org/wiki/painting_366127/William-Harris-Weatherhead/Crumbs-From-A-Poor-Man%27s-Table. William Harris Weatherhead (British 1843-1903), CRUMBS FROM A POOR MAN'S TABLE (Image)](images/painting1.jpg){width=70% .external}

## Crumbs

{distill} authors https://pkgs.rstudio.com/distill/authors.html  

citation(package = "distill")

### A floating TOC in a fixed position

### Scrolling Active States

### Toggle (show/hide) button

## Layouts

### Default layout

##### l-body

```{r, layout="l-body", fig.width=6, fig.height=1.5}
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_smooth() +
  facet_grid(~ cut)
```

### Wider layouts

##### l-body-outset

```{r, layout="l-body-outset", fig.width=6, fig.height=1.5}
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_smooth() +
  facet_grid(~ cut)
```

##### l-page

```{r, layout="l-page", fig.width=6, fig.height=1.5}
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_smooth() +
  facet_grid(~ cut)
```

### Tables with Knitr kable

```{r, layout="l-body-outset"}
library(knitr)
kable(head(mtcars))
```

### Paged tables

```{r, layout="l-body-outset"}
library(rmarkdown)
paged_table(mtcars)
```

```{r, layout="l-screen-inset"}
library(rmarkdown)
paged_table(mtcars)
```

### Full screen layout

##### l-screen-inset shaded

```{r, layout="l-screen-inset shaded"}
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

##### l-screen-inset

```{r, layout="l-screen-inset"}
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

##### l-screen

```{r, layout="l-screen"}
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

# Heading h1

## Heading h2

### Heading h3

#### Heading h4

##### Heading h5

###### Heading h6